<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Normalize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
        crossorigin="anonymous" />

    <link href="https://fonts.googleapis.com/css?family=Poppins:600" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/style.css">

    <title>Operation Room</title>
</head>

<body>
    {{{body}}}
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.0.1/lib/anime.min.js"></script>
    <script src="https://kit.fontawesome.com/207a780f1d.js" crossorigin="anonymous"></script>
    <script src="/js/index.js"></script>
    <script>
        // Button Hover Effect using Animejs
        const btns = document.querySelectorAll('.btn')
        btns.forEach(element => element.addEventListener('mouseover', (event) => {
            anime({
                targets: event.target,
                scale: 1.15,
                duration: 500
            })
        }))

        btns.forEach(element => element.addEventListener('mouseleave', (event) => {
            anime({
                targets: event.target,
                scale: 1,
                duration: 500
            })
        }))

        // Operate Button Click Effect
        const basicTimeline = anime.timeline({
            autoplay: false,
            direction: 'alternate',
        })

        const pathEls = $('.check')
        for (let i = 0; i < pathEls.length; i++) {
            var pathEl = pathEls[i]
            var offset = anime.setDashoffset(pathEl)
            pathEl.setAttribute('stroke-dashoffset', offset)
        }

        const operateButtonAnime = basicTimeline
            .add({
                targets: '#operate',
                delay: 200,
                duration: 1,
                opacity: '0',
            })
            .add({
                targets: '.button',
                height: 0,
                duration: 200,
            })
            .add({
                targets: '.progress-bar',
                width: 80,
                height: 80,
                delay: 500,
                duration: 300,
                borderRadius: 80,
                backgroundColor: '#23adad',
            })
            .add({
                targets: pathEl,
                strokeDashoffset: [offset, 0],
                duration: 200,
                easing: 'easeInOutSine',
            })
            .add({
                targets: '.button',
                delay: 300,
                duration: 1,
                opacity: '0',
            })

        $('.button').click(function () {
            console.log(document.getElementById('operatingTable').hasChildNodes())
            if (document.getElementById('operatingTable').hasChildNodes()) {
                operateButtonAnime.play()
            }
        })

        $('#operate').click(function () {
            console.log(document.getElementById('operatingTable').hasChildNodes())
            if (document.getElementById('operatingTable').hasChildNodes()) {
                operateButtonAnime.play()
            }
        })

    </script>
</body>

</html>